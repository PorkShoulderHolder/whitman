whitman
=======

A Collection of the tools I made to scrape, analyse, and catalogue all of Walt Whitman's correspondence from 1860 to 1875.
And more importantly, the information I gathered in the form of text, JSON, pickle, and BSON.

Purpose
=======

The main purpose of this is to make the Whitman Correspondence data available in widely used formats and to promote the review and visualization of this unique dataset.

Aside from NE_Tagger and jsonmaker, much of the scripts will have little use outside of providing examples of screen scraping and text analysis using nltk. I included them
as a reference to where the data files came from.

My friend presented this to me as a potential project months ago when he noticed how extensive the whitmanArchives website was.


Two of the more useful objects:

##NE_Tagger

The NE_Record object takes a section of text as well as an optional text heading parameter and then performs the
relevant named entity recognition and populates its people, locations,

    >>>from NE_Tagger import NE_Record

    >>>netagger = NE_Tagger("Dear mother, the heat is awful, please let me come home to Camden, Mass", "Letter from Walt Whitman to his Mother")

    >>>print netagger.sender

    "Walt Whitman"

    >>>print netagger.locations

    ["Camden"]

etc...

##jsonmaker

The jsonmaker object provides a light wrapper for the json module to convert python objects to json/bson files

    >>>from jsonmaker import *

    >>>saveToFileAsJSON(obj,'myfile.json',readable = True)

    >>>saveToFileAsBSON(obj,'myfile.bson)


Data
====

1. whitmanData.txt is the raw csv file generated by whitmanCrawler.py, and cleanedWhitmanData.txt is a nicer version of this with 'normalized dates' associated with each letter.

2. whitmanjson.json and it's bson counterpart are the big fishes here. They are arrays of jsonized NE_Record objects, (one entry per letter), consisting of all sorts of easy to use
descriptors about the letter such as the sender, and recipient (as interpreted by my scripts), locations, geo-political entities, and more, even including the latlngs of everything that was recognized as a place.
Below is an example entry that represents one letter (the full json is an array of the letters).

##example from whitmanjson.json

    {
       "taggedHeading":[         /* this is the heading of the letter after being processed by nltk's
                                    pos (parts of speech) tagger */
          [
             [
                "Letter",
                "NNP"
             ],
             [
                "from",
                "IN"
             ],
             [
                [
                   "Walt",
                   "NNP"
                ],
                [
                   "Whitman",
                   "NNP"
                ]
             ],
             [
                "to",
                "TO"
             ],
             [
                [
                   "James",
                   "NNP"
                ],
                [
                   "Russell",
                   "NNP"
                ],
                [
                   "Lowell",
                   "NNP"
                ]
             ],
             [
                ",",
                ","
             ]
          ]
       ],
       "people":[           /* this is what the named entity recognizer thought were people */
          "Dear",
          "Mr. House2",
          "Bardic Symbols",
          "Mr. House",
          "Walt WhitmanPortland",
          "Myrtle"
       ],
       "money":[

       ],
       "year":"1860",
       "locations":[

       ],
       "month":"Jan",
       "parties":[          /* compilation of sender, recipient, and other organizations named in the letter
          "Walt Whitman",
          "James Russell Lowell"
       ],
       "properDate":"Jan 20, 1860",
       "gpe":[
          "Brooklyn"
       ],
       "facility":[

       ],
       "latlngs":[          /* latitude and longitude generated by the detected locations cross referenced
                               with a list of american cities and then passed into the google geotagging api */
          [
             40.65,
             -73.95
          ]
       ],
       "text":"  Jan. 20, '60. Dear Sir,1 Mr. House2 inform'd me that you accepted, and would publish, my \"Bardic Symbols.\"3
       If so, would you, as soon as convenient, have it put in type, and send me the proof? About the two lines:
       (See from my dead lips the ooze exuding at last! See the prismatic colors glistening and rolling!)   I have in view,
       from them, an effect in the piece which I clearly feel, but cannot as clearly define. Though I should prefer them in,
       still, as I told Mr. House, I agree that you may omit them, if you decidedly wish to.
       Yours &c Walt WhitmanPortland av. near Myrtle | Brooklyn, N. Y. ",
       "dateText":"",
       "percents":[

       ],
       "taggedText":[       /* text with pos tags */
          [
             [
                "Jan.",
                "NNP"
             ],
             [
                "20",
                "CD"
             ],
             [
                ",",
                ","
             ],
             [
                "'60",
                "-NONE-"
             ],
             [
                ".",
                "."
             ]
          ],
          [
             [
                [
                   "Dear",
                   "NNP"
                ]
             ],
             [
                "Sir,1",
                "NNP"
             ],
             [
                [
                   "Mr.",
                   "NNP"
                ],
                [
                   "House2",
                   "NNP"
                ]
             ],
             [
                "inform",
                "NN"
             ],
             [
                "'d",
                "MD"
             ],

             .
             .          // these arrays are quite long so I abridged them for the readme
             .

             [
                "you",
                "PRP"
             ],
             [
                "may",
                "MD"
             ],
             [
                "omit",
                "VB"
             ],
             [
                "them",
                "PRP"
             ],
             [
                ",",
                ","
             ],
             [
                "if",
                "IN"
             ],
             [
                "you",
                "PRP"
             ],
             [
                "decidedly",
                "RB"
             ],
             [
                "wish",
                "JJ"
             ],
             [
                "to",
                "TO"
             ],
             [
                ".",
                "."
             ]
          ],
          [
             [
                "Yours",
                "NNS"
             ],
             [
                "&",
                "CC"
             ],
             [
                "c",
                "NN"
             ],
             [
                [
                   "Walt",
                   "NNP"
                ],
                [
                   "WhitmanPortland",
                   "NNP"
                ]
             ],
             [
                "av",
                "NN"
             ],
             [
                ".",
                "."
             ]
          ],
          [
             [
                "near",
                "IN"
             ],
             [
                [
                   "Myrtle",
                   "NNP"
                ]
             ],
             [
                "|",
                "NNP"
             ],
             [
                [
                   "Brooklyn",
                   "NNP"
                ]
             ],
             [
                ",",
                ","
             ],
             [
                "N.",
                "NNP"
             ],
             [
                "Y",
                "NNP"
             ],
             [
                ".",
                "."
             ]
          ]
       ],
       "sentences":[        /* text tokenized by sentence */
          "  Jan. 20, '60.",
          "Dear Sir,1 Mr. House2 inform'd me that you accepted, and would publish, my \"Bardic Symbols.",
          "\"3 If so, would you, as soon as convenient, have it put in type, and send me the proof?",
          "About the two lines:   (See from my dead lips the ooze exuding at last!",
          "See the prismatic colors glistening and rolling!",
          ")   I have in view, from them, an effect in the piece which I clearly feel, but cannot as clearly define.",
          "Though I should prefer them in, still, as I told Mr. House, I agree that you may omit them, if you decidedly wish to.",
          "Yours &c Walt WhitmanPortland av.",
          "near Myrtle | Brooklyn, N. Y. "
       ],
       "words":[
          "Jan.",           /* text tokenized by words */
          "20",
          ",",
          "'60.",
          "Dear",
          "Sir,1",
          "Mr.",
          "House2",
          "inform",
          "'d",

          .
          .             // these arrays are quite long so I abridged them for the readme
          .

          "you",
          "may",
          "omit",
          "them",
          ",",
          "if",
          "you",
          "decidedly",
          "wish",
          "to.",
          "Yours",
          "&",
          "c",
          "Walt",
          "WhitmanPortland",
          "av.",
          "near",
          "Myrtle",
          "|",
          "Brooklyn",
          ",",
          "N.",
          "Y",
          "."
       ],
       "date":[

       ],
       "normalizedTime":"0.00271997824017",     /* this is some number between 0 and 1 representing where this letter falls
                                                   on a timeline from 1860 to 1875 */

       "recipient":"James Russell Lowell",      /* Named entity recognition performed on the heading gives us
                                                   a sender and a recipient */
       "organizations":[

       ],
       "sender":"Walt Whitman",
       "url":"http://www.whitmanarchive.org/biography/correspondence/cw/tei/uva.00342.html", /* the page this data was scraped from */
       "doc":{
          "headline":"doc",
          "text":""
       },
       "pastTO":true,
       "time":[

       ],
       "heading":" Letter from Walt Whitman to James Russell Lowell ," /* raw heading */
    }

3. The postageTrafficByYear files contain outgoing and incoming postage and word counts by year with respect to Whitman.
It also contains data that is in whitmanjson.json, but has been reformatted into a cumulative/array format.

## explanation of postageTrafficByYear.json

    {
        "outgoingLetterTraffic": [  /* counts of outbound mail per year: as you can see the data is sort of sparse
                                       sometimes, but this could be good for some histogram or something */
            14,
            5,
            25,
            133,
            70,
            40,
            48,
            53,
            71,
            17,
            17,
            22,
            25,
            35,
            42,
            30,
            54
        ],
        "incomingLetterTraffic": [  /* counts of incoming mail per year */
            36,
            5,
            32,
            160,
            110,
            55,
            37,
            35,
            24,
            5,
            14,
            12,
            9,
            12,
            0,
            0,
            2
        ],
        "locations": [      /* array of arrays of locations per letter */
        [],
        [
            [
                22.5009081,
                114.1558258
            ],
            [
                37.4315734,
                -78.6568942
            ]
        ],
        [],
        [
            [
                40.65,
                -73.95
            ]
        ],

            .
            .
            .

        [
             [
                 38.8    951118,
                -77.    0363658
            ]
         ]
     ], 
     "outgoingWordTraffic": [ /* similar to outgoingLetterTraffic except this counts outgoing words per year instead of letters:
                                could be useful in determining average letter length over time */
        4075,
        1263,
        18096,
        93964,
        34537,
        16136,
        12085,
        16626,
        21527,
        4979,
        3180,
        3365,
        8193,
        7208,
        7934,
        2994,
        6335
    ], 
     "normalizedDates": [  /* full array of the position of each letter between 1860 and 1876 normalized between 0 and 1.
                             could be used in conjunction with the array of locations per letter above */
        "0.0",
        "0.000951992384061",
        "0.00217598259214",
        "0.00271997824017",
        "0.00557595539236",
        .
        .
        .

        "0.832857337141",
        "0.835169318645",
        "0.836393308854",
        "0.839113287094",
        "0.839385284918",
        "0.841833265334",
        "0.843057255542",
        "1.0",
        "1.0",
        "1.0",
        "1.0",
        "1.0",
        "1.0",
        "1.0",
        "n/a",
        "n/a",
        "n/a"
    ], 
     "incomingWordTraffic": [    /* similar to imcomingLetterTraffic except this counts incoming words per year instead of letters:
                                could be useful in determining average letter length over time */
        11309,
        2080,
        20955,
        90730,
        48210,
        19223,
        10364,
        13362,
        8461,
        2267,
        6344,
        7268,
        3546,
        3371,
        0,
        0,
        340
    ]}
 
Visualizations
==============

I hope to add more here soon, please take advantage of the data and make some cool pictures!

